# MCP Implementation Environment Configuration
# Updated to align with .env.example template
# Updated: August 13, 2025 - Includes Model Armor integration and enhanced security controls

# =============================================================================
# CORE SERVICE CONFIGURATION
# =============================================================================

# Server binding configuration
HOST=0.0.0.0
PORT=8080

# Environment type (development, staging, production)
ENVIRONMENT=development
LOG_LEVEL=info

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================

# Google Gemini model configuration
AGENT_MODEL=gemini-1.5-flash
AGENT_NAME=GreetingAgent
AGENT_INSTRUCTION=You are a friendly greeting agent. Welcome users warmly and help them with their requests. Be conversational, helpful, and use the available tools when appropriate.

# =============================================================================
# GOOGLE CLOUD CONFIGURATION
# =============================================================================

# Google Cloud Project settings
GOOGLE_CLOUD_PROJECT=your-google-cloud-project-id
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json
GCP_PROJECT=your-google-cloud-project-id

# Google Cloud Run Authentication
TARGET_AUDIENCE=https://your-mcp-server-service.run.app
EXPECTED_AUDIENCE=https://your-mcp-server-service.run.app
CLOUD_RUN_AUDIENCE=https://your-mcp-server-service-url

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================

# MCP server connection settings
MCP_URL=http://localhost:8000
MCP_SERVER_URL=https://your-mcp-server-service-url
MCP_SERVER_TIMEOUT=30

# MCP service account configuration
MCP_CLIENT_SERVICE_ACCOUNT=mcp-client-sa@your-project.iam.gserviceaccount.com
MCP_SERVER_SERVICE_ACCOUNT=mcp-server-sa@your-project.iam.gserviceaccount.com

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Core security settings
OPA_URL=http://localhost:8181
KMS_KEY_PATH=projects/your-project/locations/global/keyRings/your-ring/cryptoKeys/your-key
SECURITY_LEVEL=standard

# Model Armor API Configuration for Enhanced Threat Protection
# Replace with your actual API key from: https://modelarmor.com/dashboard
MODEL_ARMOR_API_KEY=YOUR_MODEL_ARMOR_API_KEY

# =============================================================================
# SECURITY CONTROL FLAGS (Enhanced Framework Features)
# =============================================================================

# Security control enablement flags (true/false)
ENABLE_PROMPT_PROTECTION=true
ENABLE_CONTEXT_VALIDATION=true
ENABLE_MCP_VERIFICATION=true
ENABLE_RESPONSE_SANITIZATION=true

# Security thresholds and limits
MAX_CONTEXT_SIZE=10000
PROMPT_INJECTION_THRESHOLD=0.7
MAX_RESPONSE_SIZE=50000

# MCP response security
VERIFY_MCP_SIGNATURES=true
TRUST_UNSIGNED_RESPONSES=false

# =============================================================================
# MODEL ARMOR & CONTEXT SANITIZER CONFIGURATION
# =============================================================================

# ContextSanitizer security levels: "standard" or "strict"
CONTEXT_SANITIZER_LEVEL=standard

# Model Armor API timeout (seconds)
MODEL_ARMOR_TIMEOUT=10.0

# Pattern matching fallback when Model Armor API unavailable
ENABLE_PATTERN_FALLBACK=true

# =============================================================================
# TESTING CONFIGURATION (Optional)
# =============================================================================

# Testing service URLs (for running integration tests)
AGENT_SERVICE_URL=http://localhost:8080

# =============================================================================
# CLOUD RUN DEPLOYMENT VARIABLES
# =============================================================================

# These are automatically set by Cloud Run when deployed
# Uncomment if you need to override for local testing
# CLOUD_RUN_SERVICE=agent-greeting-service
# CLOUD_RUN_REVISION=agent-greeting-service-001
# K_SERVICE=agent-greeting-service
